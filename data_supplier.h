#pragma once

#include"soldier.h"
#include"tree.h"
#include <GL/glew.h>
#include <GLFW/glfw3.h>

#define GEN_SUPPLIER(obj, v_cnt)\
template<>\
class data_supplier<obj> {\
public:\
	enum { vertex_cnt = v_cnt };\
	static const float positions[];\
	static const GLubyte position_indices[];\
	static const normal_index_data normal_indices[];\
	static const float normals[];\
}

namespace Rendering {
	namespace Models {

		struct normal_index_data {
			int n;
			int idx;
		};

		template<class Obj>
		class data_supplier;

		GEN_SUPPLIER(DTO::defender, 180);
		GEN_SUPPLIER(DTO::attacker, 18);
		GEN_SUPPLIER(DTO::tree<DTO::defender>, 96);
		GEN_SUPPLIER(DTO::tree<DTO::attacker>, 192);	

		const float data_supplier<DTO::defender>::positions[] = {
	/*		0.0000, -1.1135, -0.8507,    //0
			0.8090, -1.1135, -0.2629,    //1
			0.5000, -1.1135,  0.6882,    //2
		-0.5000, -1.1135,  0.6882,    //3
		-0.8090, -1.1135, -0.2629,    //4

			0.0000, -0.2629, -1.3764,    //5
			1.3090, -0.2629, -0.4253,    //6
			0.8090, -0.2629,  1.1135,    //7
		-0.8090, -0.2629,  1.1135,    //8
		-1.3090, -0.2629, -0.4253,    //9

			0.0000,  0.2629,  1.3764,    //10
			1.3090,  0.2629,  0.4253,    //11
			0.8090,  0.2629, -1.1135,    //12
		-0.8090,  0.2629, -1.1135,    //13
		-1.3090,  0.2629,  0.4253,    //14

			0.0000,  1.1135,  0.8506,    //15 
			0.8090,  1.1135,  0.2629,    //16 
			0.5000,  1.1135, -0.6882,    //17
		-0.5000,  1.1135, -0.6882,    //18
		-0.8090,  1.1135,  0.2629,    //19

		//mids
			0.0000, -1.1135,  0.0000,       //20
			0.5854, -0.4980, -0.8058,       //21
			0.9472, -0.4980,  0.3078,       //22
			0.0000, -0.4980,  0.9960,       //23

		-0.9472, -0.4980,  0.3078,       //24
		-0.5854, -0.4980, -0.8058,       //25
		-0.9472,  0.4980, -0.3078,       //26
			0.0000,  1.1135, -0.0000,       //27

		-0.5854,  0.4980,  0.8058,       //28
			0.5854,  0.4980,  0.8057,       //29
			0.9472,  0.4980, -0.3078,       //30
			0.0000,  0.4980, -0.9960       */ //31
			
			0.00000, -0.50000, -0.38199,    //0
			0.36327, -0.50000, -0.11805,  //1
			0.22452, -0.50000, 0.30903,	  //2
			-0.22452, -0.50000, 0.30903, //3
			-0.36327, -0.50000, -0.11805,//4

			0.00000, -0.11805, -0.61805,  //5
			0.58779, -0.11805, -0.19097,  //6
			0.36327, -0.11805, 0.50000,	  //7
			-0.36327, -0.11805, 0.50000, //8
			-0.58779, -0.11805, -0.19097,//9

			0.00000, 0.11805, 0.61805,	  //10
			0.58779, 0.11805, 0.19097,	  //11
			0.36327, 0.11805, -0.50000,	  //12
			-0.36327, 0.11805, -0.50000, //13
			-0.58779, 0.11805, 0.19097,	 //14

			0.00000, 0.50000, 0.38195,	  //15 
			0.36327, 0.50000, 0.11805,	  //16 
			0.22452, 0.50000, -0.30903,	  //17
			-0.22452, 0.50000, -0.30903, //18
			-0.36327, 0.50000, 0.11805,	 //19

			//mids
			0.00000, -0.50000, 0.00000,	     //20
			0.26286, -0.22362, -0.36183,     //21
			0.42533, -0.22362, 0.13821,	     //22
			0.00000, -0.22362, 0.44724,	     //23

			-0.42533, -0.22362, 0.13821,    //24
			-0.26286, -0.22362, -0.36183,   //25
			-0.42533, 0.22362, -0.13821,    //26
			0.00000, 0.50000, 0.00000,	     //27

			-0.26286, 0.22362, 0.36183,	    //28
			0.26286, 0.22362, 0.36179,	     //29
			0.42533, 0.22362, -0.13821,	     //30
			0.00000, 0.22362, -0.44724	     //31
		};
		const GLubyte data_supplier<DTO::defender>::position_indices[] = {
				20,   0,   1,
				20,   1,   2,
				20,   2,   3,
				20,   3,   4,
				20,   4,   0,

				21,   5,  12,
				21,  12,   6,
				21,   6,   1,
				21,   1,   0,
				21,   0,   5,

				22,   1,   6,
				22,   6,  11,
				22,  11,   7,
				22,   7,   2,
				22,   2,   1,

				23,   2,   7,
				23,   7,  10,
				23,  10,   8,
				23,   8,   3,
				23,   3,   2,

				24,   4,   3,
				24,   3,   8,
				24,   8,  14,
				24,  14,   9,
				24,   9,   4,

				25,  13,   5,
				25,   5,   0,
				25,   0,   4,
				25,   4,   9,
				25,   9,  13,

				26,  13,   9,
				26,   9,  14,
				26,  14,  19,
				26,  19,  18,
				26,  18,  13,

				27,  18,  19,
				27,  19,  15,
				27,  15,  16,
				27,  16,  17,
				27,  17,  18,

				28,  14,   8,
				28,   8,  10,
				28,  10,  15,
				28,  15,  19,
				28,  19,  14,

				29,  15,  10,
				29,  10,   7,
				29,   7,  11,
				29,  11,  16,
				29,  16,  15,

				30,  17,  16,
				30,  16,  11,
				30,  11,   6,
				30,   6,  12,
				30,  12,  17,

				31,  13,  18,
				31,  18,  17,
				31,  17,  12,
				31,  12,   5,
				31,   5,  13
		};
		const normal_index_data data_supplier<DTO::defender>::normal_indices[] = {
			{5, 0},
			{5, 1},
			{5, 2},
			{5, 3},
			{5, 4},
			{5, 5},
			{5, 6},
			{5, 7},
			{5, 8},
			{5, 9},
			{5,10},
			{5,11},
		};
		const float data_supplier<DTO::defender>::normals[] = {
			0.0000, -1.0000,  0.0000,
				0.5258, -0.4471, -0.7236,
				0.8507, -0.4472,  0.2764,
				0.0000, -0.4472,  0.8945,
			-0.8507, -0.4472,  0.2764,
			-0.5258, -0.4471, -0.7236,
			-0.8507,  0.4472, -0.2764,
			-0.0000,  1.0000, -0.0000,
			-0.5258,  0.4471,  0.7236,
				0.5258,  0.4472,  0.7236,
				0.8507,  0.4472, -0.2764,
				0.0000,  0.4472, -0.8945
		};

		const float data_supplier<DTO::attacker>::positions[] = {
				 0.5, 0, 0.5,
				 0.5, 0,-0.5,
				-0.5, 0,-0.5,
				-0.5, 0, 0.5,
				 0.0, 1.0, 0.0,
		};
		const GLubyte data_supplier<DTO::attacker>::position_indices[] = {
			0, 1, 3,
			1, 2, 3,
			2, 4, 3,
			4, 1, 0,
			1, 4, 2,
			3, 4, 0,
		};
		const float data_supplier<DTO::attacker>::normals[] = {
				0.0,     -1.f,       0.0,
			-0.894427, 0.447214,  0.000000,
			0.894427,  0.447214,  0.000000,
			0.000000,  0.447214,  -0.894427,
			0.000000,   0.447214, 0.894427,
		};
		const normal_index_data data_supplier<DTO::attacker>::normal_indices[] = {
			{2, 0},
			{1, 1},
			{1, 2},
			{1, 3},
			{1, 4},
		};


		static const float half_SIN45 = 0.35355f;
		static const float SIN22_5 = 0.38268f;
		static const float COS22_5 = 0.92587f;
		const float data_supplier<DTO::tree<DTO::defender>>::positions[] = {
								0, 0,					0.5,
			-half_SIN45, 0, half_SIN45,
						 -0.5, 0,						0,
			-half_SIN45, 0,-half_SIN45,
								0, 0,				 -0.5,
			 half_SIN45, 0,-half_SIN45,
							0.5, 0,						0,
			 half_SIN45, 0,  half_SIN45,
								0, 0,						0,

					 0, 1,   0.5,
			-half_SIN45, 1, half_SIN45,
				-0.5, 1,     0,
			-half_SIN45, 1,-half_SIN45,
					 0, 1,  -0.5,
			 half_SIN45, 1,-half_SIN45,
				 0.5, 1,     0,
			 half_SIN45, 1,  half_SIN45,
					 0, 1,     0,
		};
		const GLubyte data_supplier<DTO::tree<DTO::defender>>::position_indices[] = {
			//bottom
			0, 1, 8,
			1, 2, 8,
			2, 3, 8,
			3, 4, 8,
			4, 5, 8,
			5, 6, 8,
			6, 7, 8,
			7, 0, 8,

			//sides
				1,  0,  9,
				9, 10,  1,
				2,  1, 10,
			 10, 11,  2,
				3,  2, 11,
			 11, 12,  3,
				4,  3, 12,
			 12, 13,  4,
				5,  4, 13,
			 13, 14,  5,
				6,  5, 14,
			 14, 15,  6,
				7,  6, 15,
			 15, 16,  7,
				0,  7, 16,
			 16,  9,  0,

			 //top
			10,  9, 17,
			11, 10, 17,
			12, 11, 17,
			13, 12, 17,
			14, 13, 17,
			15, 14, 17,
			16, 15, 17,
			 9, 16, 17,
		};
		const float data_supplier<DTO::tree<DTO::defender>>::normals[] = {
			0, -1, 0,
			-SIN22_5, 0,  COS22_5,
			-COS22_5, 0,  SIN22_5,
			-COS22_5, 0, -SIN22_5,
			-SIN22_5, 0, -COS22_5,
			 SIN22_5, 0, -COS22_5,
			 COS22_5, 0, -SIN22_5,
			 COS22_5, 0,  SIN22_5,
			 SIN22_5, 0,  COS22_5,
			0, 1, 0,
		};
		const normal_index_data data_supplier<DTO::tree<DTO::defender>>::normal_indices[] = {
			{8, 0},

			{2, 1},
			{2, 2},
			{2, 3},
			{2, 4},
			{2, 5},
			{2, 6},
			{2, 7},
			{2, 8},

			{8, 9},
		};


		static const float third_SIN22_5 = SIN22_5 * 0.33333f;
		static const float third_COS22_5 = COS22_5 * 0.33333f;
		const float data_supplier<DTO::tree<DTO::attacker>>::positions[] = {

			//bottom
			//inner
			-third_SIN22_5, 0,  third_COS22_5,
			-third_COS22_5, 0,  third_SIN22_5,
			-third_COS22_5, 0, -third_SIN22_5,
			-third_SIN22_5, 0, -third_COS22_5,
			 third_SIN22_5, 0, -third_COS22_5,
			 third_COS22_5, 0, -third_SIN22_5,
			 third_COS22_5, 0,  third_SIN22_5,
			 third_SIN22_5, 0,  third_COS22_5,


			 //outer
									0, 0,				0.5,
			-half_SIN45, 0, half_SIN45,
						 -0.5, 0,						0,
			-half_SIN45, 0,-half_SIN45,
								0, 0,				 -0.5,
			 half_SIN45, 0,-half_SIN45,
							0.5, 0,						0,
			 half_SIN45, 0,  half_SIN45,
								0, 0,						0,

								//top
								//inner
								-third_SIN22_5, 1,  third_COS22_5,
								-third_COS22_5, 1,  third_SIN22_5,
								-third_COS22_5, 1, -third_SIN22_5,
								-third_SIN22_5, 1, -third_COS22_5,
								third_SIN22_5, 1, -third_COS22_5,
								third_COS22_5, 1, -third_SIN22_5,
								third_COS22_5, 1,  third_SIN22_5,
								third_SIN22_5, 1,  third_COS22_5,

								//outer
													0, 1,				0.5,
								-half_SIN45, 1, half_SIN45,
											-0.5, 1,						0,
								-half_SIN45, 1,-half_SIN45,
													0, 1,				 -0.5,
								half_SIN45, 1,-half_SIN45,
												0.5, 1,						0,
								half_SIN45, 1,  half_SIN45,
													0, 1,						0,
		};
		const GLubyte data_supplier<DTO::tree<DTO::attacker>>::position_indices[] = {
			//bot
			8,  0, 16,
			0,  9, 16,
			9,  1, 16,
			1, 10, 16,
		 10,  2, 16,
			2, 11, 16,
		 11,  3, 16,
			3, 12, 16,
		 12,  4, 16,
			4, 13, 16,
		 13,  5, 16,
			5, 14, 16,
		 14,  6, 16,
			6, 15, 16,
		 15,  7, 16,
			7,  8, 16,

			//sides
			0,  8, 25,
		 25, 17,  0,
			9,  0, 26,
			0, 17, 26,

			1,  9, 26,
		 26, 18,  1,
		 10,  1, 27,
			1, 18, 27,

			2, 10, 27,
		 27, 19,  2,
		 11,  2, 28,
			2, 19, 28,

			3, 11, 28,
		 28, 20,  3,
		 12,  3, 29,
			3, 20, 29,

			4, 12, 29,
		 29, 21,  4,
		 13,  4, 30,
			4, 21, 30,

			5, 13, 30,
		 30, 22,  5,
		 14,  5, 31,
			5, 22, 31,

			6, 14, 31,
		 31, 23,  6,
		 15,  6, 32,
			6, 23, 32,

			7, 15, 32,
		 32, 24,  7,
			8,  7, 25,
			7, 24, 25,


			//top
			17, 25, 33,
			26, 17, 33,
			18, 26, 33,
			27, 18, 33,
			19, 27, 33,
			28, 19, 33,
			20, 28, 33,
			29, 20, 33,
			21, 29, 33,
			30, 21, 33,
			22, 30, 33,
			31, 22, 33,
			23, 31, 33,
			32, 23, 33,
			24, 32, 33,
			25, 24, 33,
		};
		const float data_supplier<DTO::tree<DTO::attacker>>::normals[] = {
			0, -1, 0,

			-COS22_5, 0, SIN22_5,
			 SIN22_5, 0, COS22_5,
			-COS22_5, 0,-SIN22_5,
			-SIN22_5, 0, COS22_5,

			-SIN22_5, 0, -COS22_5,
			-COS22_5, 0,  SIN22_5,
			 SIN22_5, 0, -COS22_5,
			-COS22_5, 0, -SIN22_5,

			 COS22_5, 0, -SIN22_5,
			-SIN22_5, 0, -COS22_5,
			 COS22_5, 0,  SIN22_5,
			 SIN22_5, 0, -COS22_5,

			 SIN22_5, 0,  COS22_5,
			 COS22_5, 0, -SIN22_5,
			-SIN22_5, 0,  COS22_5,
			 COS22_5, 0,  SIN22_5,

			0, 1, 0,
		};
		const normal_index_data data_supplier<DTO::tree<DTO::attacker>>::normal_indices[] = {
			{16, 0},
			{2, 1},
			{2, 2},
			{2, 3},
			{2, 4},
			{2, 5},
			{2, 6},
			{2, 7},
			{2, 8},
			{2, 9},
			{2,10},
			{2,11},
			{2,12},
			{2,13},
			{2,14},
			{2,15},
			{2,16},
			{16, 17},
		};
	}


}